(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{339:function(a,s,n){"use strict";n.r(s);var t=n(27),e=Object(t.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h3",{attrs:{id:"函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[a._v("#")]),a._v(" 函数")]),a._v(" "),n("ol",[n("li",[n("p",[a._v("创建函数")]),a._v(" "),n("ol",[n("li",[a._v("先开辟一个新的内存空间（为其分配了一个 16 进制的地址）")]),a._v(" "),n("li",[a._v("把函数体中编写的 js 代码当做字符串存储到空间中（函数只创建不执行没有意义，因为存的字符串）")]),a._v(" "),n("li",[a._v("把分配的地址赋值给声明的函数名（function fn 和 var fn 操作原理其实形同，都是在当前作用域中声明了一个名字，此处两个名字是重复的）")])])]),a._v(" "),n("li",[n("p",[a._v("执行函数\n目的：执行函数体中的代码")]),a._v(" "),n("ol",[n("li",[a._v("函数执行的时候，浏览器会形成一个新的私有作用域（只能执行函数体重的代码）供函数体重代码执行")]),a._v(" "),n("li",[a._v("执行代码之前，先把创建函数存储的字符串变为真正的 js 表达式，自上而下的顺序在私有作用域中执行")])])])]),a._v(" "),n("p",[a._v("形成的私有作用域把函数体中的私有变量等都包裹起来了（保护起来了），在私有作用域中操作私有变量和外界没关系，外界也无法直接的操作私有变量，我们把函数执行形成的这种保护机制叫做闭包")]),a._v(" "),n("h3",{attrs:{id:"堆栈内存及内存释放"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#堆栈内存及内存释放"}},[a._v("#")]),a._v(" 堆栈内存及内存释放")]),a._v(" "),n("p",[a._v("作用域（栈内存）")]),a._v(" "),n("p",[a._v("引用数据类型开的内存空间存东西的就叫堆内存")]),a._v(" "),n("p",[a._v("栈内存（作用域）的作用")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("1. 为 js 代码提供执行的环境（执行 js 代码的地方）\n2. 基本数据类型值是直接存放在栈内存中的\n")])])]),n("p",[a._v("堆内存的作用")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[a._v("1. 存储引用数据类型值（相当于一个存储的仓库）\n2. 对象存储的是键值对\n3. 函数存储的是代码字符串\n")])])]),n("h4",{attrs:{id:"内存释放"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内存释放"}},[a._v("#")]),a._v(" 内存释放")]),a._v(" "),n("p",[a._v("在真实项目中，我们的内存越少性能越好，我们需要把一些没用的内存处理掉")]),a._v(" "),n("ol",[n("li",[a._v("堆内存释放")])]),a._v(" "),n("p",[a._v("堆内存是用来存引用数据类型的空间，不管是函数也好还是对象也好，都是先开空间存东西，有个地址，最终把地址告诉给一个名字，此时堆内存被这个名字占用，这时候这个堆内存就不能销毁，所以说，比如，我们")]),a._v(" "),n("p",[n("strong",[a._v("var o = {};当前对象对应的堆内存被变量 o 占用着，堆内存是无法销毁的。那如果想把它销毁怎么销毁呢？")])]),a._v(" "),n("p",[a._v("o 是占用了这个堆内存，所以不能销毁，那么让 o 别占用这个堆内存就可以了。所以，我们让 o=12，o=12 的时候，o 之前是一个引用地址，现在这个 o 不等于之前引用地址了，所以之前的引用地址就不会被占用了，堆内存就销毁了。但是，o=12 相当于又开辟了一个 12 的值，12 的值将会在栈内存存到，所以一般我们让")]),a._v(" "),n("p",[n("strong",[a._v("o = null，null 是空对象指针（不指向任何的内存空间，不执行任何的堆内存），此时上一次的堆内存就没有被占用了。谷歌浏览器会在空闲时间把没有被占用的堆内存自动释放（销毁/回收）。")])]),a._v(" "),n("p",[a._v("这里注意，只有谷歌浏览器才是这种机制。就是你只要让它没被占用了，谷歌浏览器在空闲时间就会自动帮你把它回收销毁了，其他浏览器的机制不一样。")]),a._v(" "),n("p",[a._v("ie 浏览器是按记数指针的机制（ie 有时候记数会记乱，尤其是引用里面再调引用，引用嵌套的就会记乱，所以会导致内存不会被释放，这种就是内存不能被回收，会产生垃圾，这就叫做内存泄漏）。其他浏览器是存在销毁机制的，只不过销毁机制和谷歌 webkit 的销毁机制是不一样的，webkit 是不需要计数，只需要让他没引用，谷歌浏览器每隔一段时间空闲的时候他都会把这些堆内存从头到尾过一遍，看看哪个被占用，哪个没被占用，没被占用的就会主动被释放销毁。")]),a._v(" "),n("p",[a._v("正常情况下，如果没用的，我们最好手动赋值给 null，不管是计数也好还是自动销毁也好，都得让它先不被引用，这就是堆内存的释放。")]),a._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[a._v("栈内存释放")])]),a._v(" "),n("p",[a._v("一般情况下，函数执行形成栈内存，函数执行完，浏览器会把形成的栈内存自动释放；有时候执行完成，栈内存不能被释放（后面写）")]),a._v(" "),n("p",[a._v("全局作用域在加载页面的时候执行，在关掉页面的时候销毁；")]),a._v(" "),n("h3",{attrs:{id:"变量提升"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#变量提升"}},[a._v("#")]),a._v(" 变量提升")]),a._v(" "),n("p",[a._v("在‘当前作用域’中，js 代码自上而下执行之前，浏览器首先会把所有带‘var/function’关键字的进行提前的声明或者定义（es6 中常量不进行变量提升）")]),a._v(" "),n("p",[a._v("声明(declare)：var num;在当前作用域中吼一嗓子我有 num 这个名了")]),a._v(" "),n("p",[a._v("定义(defined)：num=12;把声明的名字赋一个值")]),a._v(" "),n("p",[a._v("带 var 关键字的只是提前的声明一下；带 function 关键字的在变量提升阶段把声明和定义都完成了")]),a._v(" "),n("h4",{attrs:{id:"定义变量的时候带-var-和不带-var-的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定义变量的时候带-var-和不带-var-的区别"}},[a._v("#")]),a._v(" 定义变量的时候带 var 和不带 var 的区别")]),a._v(" "),n("ol",[n("li",[a._v("带 var\n变量提升：在“全局作用域”中，我们声明一个变量，相当于给全局变量 window 增加了一个属性名。 var a; <=> window.a = undefined")])]),a._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 变量提升： var a; <=> window.a = undefined")]),a._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// undefined")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 12")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 在“全局作用域”中，我们声明一个变量，相当于给全局对象window增加了一个属性名")]),a._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// window['a]")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("p",[a._v("console.log(a)和 console.log(window.a)意思是不一样的，console.log(a)相当于把 a 变量存的值输出，console.log(window.a)相当于把 window 全局对象里面 a 这个属性对应的属性值输出了")]),a._v(" "),n("p",[a._v("之所以输出的值一样，是因为在全局作用域当中，我们声明一个变量 a 相当于给 window 加了一个 a 的属性，当 a=12 的时候，除了让变量 a=12，还相当于 window.a=12")]),a._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[a._v("不带 var")])]),a._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// console.log(a);//Uncaught ReferenceError: a is not defined")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// console.log(window.a);//undefined")]),a._v("\na "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// <=> window.a=12")]),a._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// =>12 <=> window.a(就是输出的window.a，只是省略了window)")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("p",[a._v("在全局作用域中，如果不带 var，仅仅是给全局对象设置了一个新的属性名（把 window.省略了），这时不应该再叫变量了。")]),a._v(" "),n("p",[a._v("所以在设置这个属性之前就 console.log(a);就会报错 Uncaught ReferenceError: a is not defined。")]),a._v(" "),n("p",[a._v("因为这时候属性 a 不存在，也不是变量 a，浏览器识无法识别就会直接报错。")]),a._v(" "),n("p",[a._v("但是如果强制加 window.相当于直接判断是不是 window 的一个属性，没有的话结果就是 undefined 但不会报错。")]),a._v(" "),n("p",[a._v("带 var：在当前作用域中声明了一个变量，如果当前是全局作用域，也相当于全局作用域设置了一个属性叫做 a")]),a._v(" "),n("p",[a._v("不带 var：在全局作用域中，如果不带 var，仅仅是给全局对象设置了一个新的属性名（把 window.省略了），这时不应该再叫变量了")]),a._v(" "),n("h3",{attrs:{id:"作用链"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用链"}},[a._v("#")]),a._v(" 作用链")]),a._v(" "),n("p",[a._v("函数执行形成一个私有的作用域（保护私有变量），进入到私有作用域中，首先变量提升（声明过得变量是私有的），接下来代码执行")]),a._v(" "),n("p",[a._v("1、执行的时候遇到一个变量，如果这个变量是私有的，那么按照私有处理即可")]),a._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  a "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// window.a = 12, 这个不是变量a，这相当于给window加了一个属性a，属性值12")]),a._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 12")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("p",[a._v("2、如果当前这个变量不是私有的，我们需要向他的上级作用域进行查找，上级如果也没有，则继续向上查找，一直找到 window 全局作用域为止，我们把这种查找机制叫做作用于链")])])}),[],!1,null,null,null);s.default=e.exports}}]);